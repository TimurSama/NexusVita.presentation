# –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

**–î–∞—Ç–∞:** 2025-02-16  
**–°—Ç–∞—Ç—É—Å:** –í —Ä–∞–±–æ—Ç–µ

---

## üîç –ê–ù–ê–õ–ò–ó –ü–†–û–ë–õ–ï–ú

### 1. –ü—Ä–æ–±–ª–µ–º—ã —Å Telegram –±–æ—Ç–æ–º

#### –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. **–•–∞—Ä–¥–∫–æ–¥ —Ç–æ–∫–µ–Ω–∞** –≤ `server/telegram-bot.ts` (—Å—Ç—Ä–æ–∫–∞ 5) - —É–±—Ä–∞–Ω
2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ await** –≤ `server/telegram-reminders.ts`:
   - –°—Ç—Ä–æ–∫–∞ 103: `telegramBotSettingsDb.findByUserId` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
   - –°—Ç—Ä–æ–∫–∞ 140: `userDb.findByTelegramId` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
3. **–ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–ø—É—Å–∫–æ–º –±–æ—Ç–∞**:
   - –ù–∞ Render/Vercel –±–æ—Ç –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å webhook, –∞ –Ω–µ polling
   - –í `server/telegram-bot.ts` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è polling, —á—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ serverless

#### –†–µ—à–µ–Ω–∏–µ:
- ‚úÖ –£–±—Ä–∞–Ω —Ö–∞—Ä–¥–∫–æ–¥ —Ç–æ–∫–µ–Ω–∞
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã await –≤ telegram-reminders.ts
- ‚è≥ –ù—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å webhook –¥–ª—è production (Render/Vercel)
- ‚è≥ –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –æ–∫—Ä—É–∂–µ–Ω–∏—è (polling –¥–ª—è local, webhook –¥–ª—è production)

### 2. –ü—Ä–æ–±–ª–µ–º—ã —Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –≤ Telegram Web App

#### –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ init_data**:
   - –í `api/auth/telegram-auth.ts` –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–æ–¥–ø–∏—Å—å –æ—Ç Telegram
   - –í `render/routes/auth.ts` —Ç–∞–∫–∂–µ –Ω–µ—Ç –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
   - –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏!

#### –†–µ—à–µ–Ω–∏–µ:
- ‚è≥ –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ init_data —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º HMAC-SHA-256
- ‚è≥ –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ–¥–ø–∏—Å—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚è≥ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≤—Ä–µ–º–µ–Ω–∏ (auth_date –Ω–µ —Å—Ç–∞—Ä—à–µ 24 —á–∞—Å–æ–≤)

### 3. –ü—Ä–æ–±–ª–µ–º—ã —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage**, –Ω–æ –Ω–µ –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–µ–Ω –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
2. **–ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏** –Ω–∞ –∏—Å—Ç–µ—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏
3. **–ù–µ—Ç middleware** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ API routes

#### –†–µ—à–µ–Ω–∏–µ:
- ‚è≥ –î–æ–±–∞–≤–∏—Ç—å middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚è≥ –£–ª—É—á—à–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –º–µ–∂–¥—É localStorage –∏ UserContext
- ‚è≥ –î–æ–±–∞–≤–∏—Ç—å refresh token –º–µ—Ö–∞–Ω–∏–∑–º

### 4. –ü–ª–∞–Ω –¥–ª—è –ú–∞—Ä–∏–∏ –ø–æ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–µ –∑–∞–∂–∞—Ç–æ—Å—Ç–∏

#### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
- ‚úÖ –ü–ª–∞–Ω —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ `server/maria-plan-generator.ts`
- ‚úÖ –ü–ª–∞–Ω –≤–∫–ª—é—á–∞–µ—Ç —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –¥–ª—è —Å–ø–∏–Ω—ã
- ‚ö†Ô∏è –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–ª–∞–Ω –≤–∫–ª—é—á–∞–µ—Ç —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –¥–ª—è:
  - –¢–∞–∑–æ–±–µ–¥—Ä–µ–Ω–Ω—ã—Ö –º—ã—à—Ü
  - –°–µ–¥–∞–ª–∏—â–Ω–æ–π –≥—Ä—É–ø–ø—ã –º—ã—à—Ü –∏ –Ω–µ—Ä–≤–æ–≤

#### –†–µ—à–µ–Ω–∏–µ:
- ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–ª–∞–Ω
- ‚è≥ –î–æ–±–∞–≤–∏—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –¥–ª—è —Ç–∞–∑–æ–±–µ–¥—Ä–µ–Ω–Ω—ã—Ö –º—ã—à—Ü
- ‚è≥ –î–æ–±–∞–≤–∏—Ç—å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –¥–ª—è —Å–µ–¥–∞–ª–∏—â–Ω–æ–≥–æ –Ω–µ—Ä–≤–∞

---

## üìã –ü–õ–ê–ù –î–õ–Ø –ë–ê–ó–´ –î–ê–ù–ù–´–•

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –ø–ª–∞–Ω–æ–≤ –∏ –º–µ—Ç—Ä–∏–∫ –∫–∞–∂–¥–æ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–¥–æ—Ä–æ–≤—å—è

#### 1. –¢–∞–±–ª–∏—Ü—ã –¥–ª—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∑–¥–æ—Ä–æ–≤—å—è

```sql
-- –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–¥–æ—Ä–æ–≤—å—è
CREATE TABLE IF NOT EXISTS health_directions (
  id SERIAL PRIMARY KEY,
  name TEXT NOT NULL UNIQUE, -- 'movement', 'nutrition', 'sleep', 'psychology', etc.
  display_name TEXT NOT NULL,
  description TEXT,
  icon TEXT,
  color TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- –ü–ª–∞–Ω—ã –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º –∑–¥–æ—Ä–æ–≤—å—è
CREATE TABLE IF NOT EXISTS health_direction_plans (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  direction_id INTEGER NOT NULL REFERENCES health_directions(id) ON DELETE CASCADE,
  title TEXT NOT NULL,
  description TEXT,
  start_date DATE NOT NULL,
  end_date DATE,
  status TEXT DEFAULT 'active', -- 'active', 'completed', 'paused', 'cancelled'
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- –ó–∞–¥–∞—á–∏ –≤ –ø–ª–∞–Ω–∞—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π
CREATE TABLE IF NOT EXISTS health_direction_tasks (
  id SERIAL PRIMARY KEY,
  plan_id INTEGER NOT NULL REFERENCES health_direction_plans(id) ON DELETE CASCADE,
  title TEXT NOT NULL,
  description TEXT,
  task_type TEXT, -- 'exercise', 'meal', 'meditation', 'measurement', etc.
  frequency TEXT, -- 'daily', 'weekly', 'custom'
  scheduled_time TEXT, -- HH:MM format
  completed BOOLEAN DEFAULT FALSE,
  completed_at TIMESTAMP,
  due_date DATE,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º –∑–¥–æ—Ä–æ–≤—å—è
CREATE TABLE IF NOT EXISTS health_direction_metrics (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  direction_id INTEGER NOT NULL REFERENCES health_directions(id) ON DELETE CASCADE,
  metric_name TEXT NOT NULL, -- 'weight', 'steps', 'sleep_hours', 'mood_score', etc.
  value REAL NOT NULL,
  unit TEXT,
  recorded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  notes TEXT,
  metadata JSONB -- –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
);

-- –û—Ç—á–µ—Ç—ã –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º –∑–¥–æ—Ä–æ–≤—å—è
CREATE TABLE IF NOT EXISTS health_direction_reports (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  direction_id INTEGER NOT NULL REFERENCES health_directions(id) ON DELETE CASCADE,
  report_type TEXT NOT NULL, -- 'daily', 'weekly', 'monthly', 'custom'
  period_start DATE NOT NULL,
  period_end DATE NOT NULL,
  summary JSONB, -- —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —Ç—Ä–µ–Ω–¥—ã, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
  insights TEXT, -- AI-–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω—Å–∞–π—Ç—ã
  recommendations TEXT, -- —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 2. –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–ª–∞–Ω–∞–º–∏

```typescript
// healthDirectionPlansDb.ts
export const healthDirectionPlansDb = {
  // –°–æ–∑–¥–∞—Ç—å –ø–ª–∞–Ω
  create: async (userId: number, directionId: number, data: {
    title: string;
    description?: string;
    startDate: Date;
    endDate?: Date;
  }) => { ... },

  // –ü–æ–ª—É—á–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–ª–∞–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é
  findActiveByUserAndDirection: async (userId: number, directionId: number) => { ... },

  // –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø–ª–∞–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  findByUserId: async (userId: number) => { ... },

  // –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–ª–∞–Ω–∞
  updateStatus: async (planId: number, status: string) => { ... },
};
```

#### 3. –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏

```typescript
// healthDirectionMetricsDb.ts
export const healthDirectionMetricsDb = {
  // –ó–∞–ø–∏—Å–∞—Ç—å –º–µ—Ç—Ä–∏–∫—É
  create: async (userId: number, directionId: number, data: {
    metricName: string;
    value: number;
    unit?: string;
    notes?: string;
    metadata?: object;
  }) => { ... },

  // –ü–æ–ª—É—á–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥
  findByUserAndDirectionAndPeriod: async (
    userId: number,
    directionId: number,
    startDate: Date,
    endDate: Date,
    metricName?: string
  ) => { ... },

  // –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –º–µ—Ç—Ä–∏–∫
  getStatistics: async (
    userId: number,
    directionId: number,
    metricName: string,
    period: 'week' | 'month' | 'year'
  ) => { ... },
};
```

#### 4. –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–æ–≤

```typescript
// healthDirectionReportsDb.ts
export const healthDirectionReportsDb = {
  // –°–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç
  generateReport: async (
    userId: number,
    directionId: number,
    reportType: 'daily' | 'weekly' | 'monthly',
    periodStart: Date,
    periodEnd: Date
  ) => {
    // 1. –°–æ–±—Ä–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥
    // 2. –°–æ–±—Ä–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
    // 3. –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
    // 4. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Å–∞–π—Ç—ã (AI)
    // 5. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    // 6. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç—á–µ—Ç
  },

  // –ü–æ–ª—É—á–∏—Ç—å –æ—Ç—á–µ—Ç—ã
  findByUserAndDirection: async (userId: number, directionId: number) => { ... },
};
```

---

## üì± –ü–õ–ê–ù –†–ê–ó–†–ê–ë–û–¢–ö–ò –°–¢–†–ê–ù–ò–¶ –î–õ–Ø –ö–ê–ñ–î–û–ì–û –ù–ê–ü–†–ê–í–õ–ï–ù–ò–Ø –ó–î–û–†–û–í–¨–Ø

### –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–ö–∞–∂–¥–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å:

1. **–û–±–∑–æ—Ä (Overview)**
   - –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
   - –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
   - –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –ø–ª–∞–Ω–∞–º
   - –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

2. **–ü–ª–∞–Ω—ã (Plans)**
   - –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–ª–∞–Ω—ã
   - –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞–Ω–æ–≤
   - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–ª–∞–Ω–∞
   - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞–Ω–∞

3. **–ú–µ—Ç—Ä–∏–∫–∏ (Metrics)**
   - –í–≤–æ–¥ –º–µ—Ç—Ä–∏–∫
   - –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
   - –ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø–∏—Å–µ–π
   - –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

4. **–û—Ç—á–µ—Ç—ã (Reports)**
   - –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
   - –ù–µ–¥–µ–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
   - –ú–µ—Å—è—á–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
   - –ö–∞—Å—Ç–æ–º–Ω—ã–µ –æ—Ç—á–µ—Ç—ã

5. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ (Settings)**
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
   - –ï–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
   - –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ü–µ–ª–∏

### –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### 1. –î–≤–∏–∂–µ–Ω–∏–µ (Movement) - `/health/movement`

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `MovementOverview.tsx` - –æ–±–∑–æ—Ä –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- `MovementPlans.tsx` - –ø–ª–∞–Ω—ã —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
- `MovementMetrics.tsx` - –º–µ—Ç—Ä–∏–∫–∏ (—à–∞–≥–∏, –∫–∞–ª–æ—Ä–∏–∏, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å)
- `MovementReports.tsx` - –æ—Ç—á–µ—Ç—ã –ø–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- `MovementSettings.tsx` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å wearables)

**–ú–µ—Ç—Ä–∏–∫–∏:**
- –®–∞–≥–∏ (steps)
- –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ (distance)
- –ö–∞–ª–æ—Ä–∏–∏ (calories)
- –ê–∫—Ç–∏–≤–Ω—ã–µ –º–∏–Ω—É—Ç—ã (active_minutes)
- –¢–∏–ø –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (activity_type)

**–ü–ª–∞–Ω—ã:**
- –¢—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
- –¶–µ–ª–∏ –ø–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

#### 2. –ü–∏—Ç–∞–Ω–∏–µ (Nutrition) - `/health/nutrition`

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `NutritionOverview.tsx` - –æ–±–∑–æ—Ä –ø–∏—Ç–∞–Ω–∏—è
- `NutritionPlans.tsx` - –ø–ª–∞–Ω—ã –ø–∏—Ç–∞–Ω–∏—è
- `NutritionMetrics.tsx` - –º–µ—Ç—Ä–∏–∫–∏ (–∫–∞–ª–æ—Ä–∏–∏, –º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç—ã)
- `NutritionReports.tsx` - –æ—Ç—á–µ—Ç—ã –ø–æ –ø–∏—Ç–∞–Ω–∏—é
- `NutritionSettings.tsx` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—Ü–µ–ª–∏ –ø–æ –∫–∞–ª–æ—Ä–∏—è–º, –¥–∏–µ—Ç—ã)

**–ú–µ—Ç—Ä–∏–∫–∏:**
- –ö–∞–ª–æ—Ä–∏–∏ (calories)
- –ë–µ–ª–∫–∏ (protein)
- –ñ–∏—Ä—ã (fats)
- –£–≥–ª–µ–≤–æ–¥—ã (carbs)
- –í–æ–¥–∞ (water)

**–ü–ª–∞–Ω—ã:**
- –ü–ª–∞–Ω—ã –ø–∏—Ç–∞–Ω–∏—è
- –†–µ—Ü–µ–ø—Ç—ã
- –¶–µ–ª–∏ –ø–æ –º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç–∞–º

#### 3. –°–æ–Ω (Sleep) - `/health/sleep`

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `SleepOverview.tsx` - –æ–±–∑–æ—Ä —Å–Ω–∞
- `SleepPlans.tsx` - –ø–ª–∞–Ω—ã –ø–æ —É–ª—É—á—à–µ–Ω–∏—é —Å–Ω–∞
- `SleepMetrics.tsx` - –º–µ—Ç—Ä–∏–∫–∏ (—á–∞—Å—ã —Å–Ω–∞, –∫–∞—á–µ—Å—Ç–≤–æ)
- `SleepReports.tsx` - –æ—Ç—á–µ—Ç—ã –ø–æ —Å–Ω—É
- `SleepSettings.tsx` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—Ü–µ–ª–µ–≤–æ–µ –≤—Ä–µ–º—è —Å–Ω–∞)

**–ú–µ—Ç—Ä–∏–∫–∏:**
- –ß–∞—Å—ã —Å–Ω–∞ (sleep_hours)
- –ö–∞—á–µ—Å—Ç–≤–æ —Å–Ω–∞ (sleep_quality)
- –í—Ä–µ–º—è –∑–∞—Å—ã–ø–∞–Ω–∏—è (bedtime)
- –í—Ä–µ–º—è –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è (wake_time)
- –§–∞–∑—ã —Å–Ω–∞ (sleep_stages)

**–ü–ª–∞–Ω—ã:**
- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–Ω–∞
- –†–∏—Ç—É–∞–ª—ã –ø–µ—Ä–µ–¥ —Å–Ω–æ–º
- –¶–µ–ª–∏ –ø–æ —Å–Ω—É

#### 4. –ü—Å–∏—Ö–æ–ª–æ–≥–∏—è (Psychology) - `/health/psychology`

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `PsychologyOverview.tsx` - –æ–±–∑–æ—Ä –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `PsychologyPlans.tsx` - –ø–ª–∞–Ω—ã –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è
- `PsychologyMetrics.tsx` - –º–µ—Ç—Ä–∏–∫–∏ (–Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ, —Å—Ç—Ä–µ—Å—Å)
- `PsychologyReports.tsx` - –æ—Ç—á–µ—Ç—ã –ø–æ –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏
- `PsychologySettings.tsx` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**–ú–µ—Ç—Ä–∏–∫–∏:**
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ (mood_score)
- –£—Ä–æ–≤–µ–Ω—å —Å—Ç—Ä–µ—Å—Å–∞ (stress_level)
- –¢—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å (anxiety_level)
- –≠–Ω–µ—Ä–≥–∏—è (energy_level)

**–ü–ª–∞–Ω—ã:**
- –ú–µ–¥–∏—Ç–∞—Ü–∏–∏
- –ü—Ä–∞–∫—Ç–∏–∫–∏ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç–∏
- –¢–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è

#### 5. –ú–µ–¥–∏—Ü–∏–Ω–∞ (Medicine) - `/health/medicine`

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `MedicineOverview.tsx` - –æ–±–∑–æ—Ä –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- `MedicinePlans.tsx` - –ø–ª–∞–Ω—ã –ª–µ—á–µ–Ω–∏—è/–ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏
- `MedicineMetrics.tsx` - –º–µ—Ç—Ä–∏–∫–∏ (–∞–Ω–∞–ª–∏–∑—ã, –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏)
- `MedicineReports.tsx` - –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã
- `MedicineSettings.tsx` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–≤—Ä–∞—á–∏, –∫–ª–∏–Ω–∏–∫–∏)

**–ú–µ—Ç—Ä–∏–∫–∏:**
- –ê–Ω–∞–ª–∏–∑—ã –∫—Ä–æ–≤–∏
- –ê—Ä—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ
- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞
- –ü—É–ª—å—Å
- –î—Ä—É–≥–∏–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏

**–ü–ª–∞–Ω—ã:**
- –ü–ª–∞–Ω—ã –ª–µ—á–µ–Ω–∏—è
- –ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ä—ã
- –ü—Ä–∏–µ–º –ª–µ–∫–∞—Ä—Å—Ç–≤

---

## ü§ñ –ü–õ–ê–ù –ù–ê–°–¢–†–û–ô–ö–ò TELEGRAM –ë–û–¢–ê

### –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (Quick Actions)

–î–æ–±–∞–≤–∏—Ç—å inline-–∫–Ω–æ–ø–∫–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞:

```typescript
// –í /menu –¥–æ–±–∞–≤–∏—Ç—å –±—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
bot.command('menu', async (ctx) => {
  await ctx.reply(
    'üìã –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é',
    Markup.inlineKeyboard([
      [
        Markup.button.callback('üìÖ –°–µ–≥–æ–¥–Ω—è', 'quick_today'),
        Markup.button.callback('üìä –ú–µ—Ç—Ä–∏–∫–∏', 'quick_metrics'),
      ],
      [
        Markup.button.callback('üéØ –¶–µ–ª–∏', 'quick_goals'),
        Markup.button.callback('‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏', 'quick_settings'),
      ],
      [
        Markup.button.callback('üèÉ –î–≤–∏–∂–µ–Ω–∏–µ', 'direction_movement'),
        Markup.button.callback('üçé –ü–∏—Ç–∞–Ω–∏–µ', 'direction_nutrition'),
      ],
      [
        Markup.button.callback('üò¥ –°–æ–Ω', 'direction_sleep'),
        Markup.button.callback('üß† –ü—Å–∏—Ö–æ–ª–æ–≥–∏—è', 'direction_psychology'),
      ],
    ])
  );
});
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–æ–º

–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `/dashboard` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–∞—à–±–æ—Ä–¥–∞:

```typescript
bot.command('dashboard', async (ctx) => {
  // –ü–æ–∫–∞–∑–∞—Ç—å —Å–≤–æ–¥–∫—É –ø–æ –≤—Å–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º
  // –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
  // –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–ª–∞–Ω—ã
  // –ü—Ä–æ–≥—Ä–µ—Å—Å
});
```

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

–£–ª—É—á—à–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π:

1. **–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø–æ –ø–ª–∞–Ω–∞–º**:
   - –ó–∞ 15 –º–∏–Ω—É—Ç –¥–æ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏
   - –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø–ª–∞–Ω–∞—Ö –Ω–∞ –¥–µ–Ω—å
   - –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ —Ü–µ–ª—è—Ö

2. **–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –º–µ—Ç—Ä–∏–∫–∞—Ö**:
   - –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –≤–Ω–µ—Å–µ–Ω–∏–∏ –º–µ—Ç—Ä–∏–∫
   - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å—è—Ö

3. **–ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è**:
   - –ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ü–µ–ª–µ–π
   - –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
   - –ü—Ä–∏ –ø—Ä–æ–ø—É—Å–∫–µ –∑–∞–¥–∞—á (–º—è–≥–∫–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è)

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (—Å–¥–µ–ª–∞—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ):
- [x] –£–±—Ä–∞—Ç—å —Ö–∞—Ä–¥–∫–æ–¥ —Ç–æ–∫–µ–Ω–∞ –∏–∑ server/telegram-bot.ts
- [x] –ò—Å–ø—Ä–∞–≤–∏—Ç—å await –≤ server/telegram-reminders.ts
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é init_data –¥–ª—è Telegram Web App
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ findByUserIdAndDateRange –≤ database-postgres.ts (–µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç—å –ø–ª–∞–Ω –¥–ª—è –ú–∞—Ä–∏–∏

### –í–∞–∂–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (—Å–¥–µ–ª–∞—Ç—å –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è):
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook –¥–ª—è production
- [ ] –î–æ–±–∞–≤–∏—Ç—å middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- [ ] –£–ª—É—á—à–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é UserContext
- [ ] –î–æ–±–∞–≤–∏—Ç—å –±—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ –±–æ—Ç
- [ ] –£–ª—É—á—à–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

### –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è (—Å–¥–µ–ª–∞—Ç—å –≤ –±—É–¥—É—â–µ–º):
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∑–¥–æ—Ä–æ–≤—å—è
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –æ—Ç—á–µ—Ç–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å AI-–∏–Ω—Å–∞–π—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

---

## üìù –ü–†–ò–ú–ï–ß–ê–ù–ò–Ø

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è init_data –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ù—É–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î
3. **UX**: –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –≤ –±–æ—Ç–µ –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î –¥–æ–ª–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ä–æ—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
