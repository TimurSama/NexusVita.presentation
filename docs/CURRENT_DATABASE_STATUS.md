# Текущий статус базы данных

## Текущая ситуация

### Локальная разработка (работает ✅)
- **База данных**: SQLite (better-sqlite3)
- **Расположение**: `data/ethoslife.db` (локальный файл)
- **Регистрация**: Работает через `/api/auth/register`
- **Вход**: Работает через `/api/auth/login` и `/api/auth/telegram-auth`
- **Данные Марии**: Хранятся в локальной БД при запуске сервера

### Vercel (НЕ РАБОТАЕТ ❌)
- **Проблема**: SQLite - это файловая база данных
- **Причина**: Vercel использует serverless функции без постоянного файлового хранилища
- **Результат**: 
  - База данных не создается
  - Данные не сохраняются
  - Регистрация и вход не работают
  - Данные Марии не доступны

## Что происходит сейчас

### При локальном запуске (`pnpm start`):
1. Сервер запускается
2. База данных создается в `data/ethoslife.db`
3. Создается профиль Марии с данными:
   - Telegram ID: 403161451
   - Дата рождения: 23.10.1997
   - Рост: 172 см
   - Вес: 57 кг
   - Документ сохранен в БД
   - Месячный план упражнений создан
4. API endpoints работают
5. Telegram бот работает

### При деплое на Vercel:
1. Собирается только клиент (`build:vercel`)
2. Серверная часть (`server/index.ts`) НЕ запускается
3. База данных НЕ создается
4. API endpoints НЕ работают
5. Данные НЕ сохраняются

## Решение для Vercel

### Вариант 1: Vercel Postgres (Рекомендуется)
- Встроенная интеграция
- Бесплатный тариф: 256 MB storage, 60 hours compute/month
- Простая настройка через Vercel Dashboard

### Вариант 2: Supabase (Лучший выбор для старта)
- Бесплатный тариф: 500 MB database, 2 GB bandwidth
- Автоматические миграции
- Встроенная аутентификация
- Простой API

### Вариант 3: Neon (Postgres)
- Бесплатный тариф: 0.5 GB storage
- Автоматическое масштабирование
- Хорошая производительность

## Что нужно сделать

1. **Выбрать базу данных** (рекомендую Supabase)
2. **Создать базу данных** и получить connection string
3. **Обновить `server/database.ts`** для использования Postgres вместо SQLite
4. **Обновить SQL запросы** под синтаксис Postgres
5. **Добавить переменные окружения** в Vercel
6. **Создать миграции** для переноса данных Марии

## Текущие данные Марии

Данные Марии создаются при локальном запуске сервера:
- Пользователь: `users` таблица
- Профиль: `user_profiles` таблица (рост, вес, дата рождения)
- Документ: `documents` таблица (содержимое из Мария.docx)
- Планы: `daily_plans` таблица (месячный план упражнений)
- Настройки бота: `telegram_bot_settings` таблица

**На Vercel эти данные НЕ существуют**, так как SQLite не работает.
